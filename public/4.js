webpackJsonp([4],{JGpq:function(t,e,r){var a=r("kgbK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("9c0f90ba",a,!0,{})},"PpM+":function(t,e,r){var a=r("VU/8")(r("dYbj"),r("sWt2"),!1,function(t){r("JGpq")},null,null);t.exports=a.exports},dYbj:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,received_items:[],purchaseOrderData:[],purchaseOrders:[],purchaseOrder:null,purchaseOrderId:null,contacts:[],contact:null,contact_id:"",warehouses:[],warehouse:null,warehouse_id:"",items:[],ro_number:"",purchase_order_id:"",receive_order_items:[{item:"",item_id:"",quantity:0,unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:0,item_pricelist_id:"",tracking_number:"",expiration_date:"",subTotal:0}],amount:"",isDisabled:!1}},mounted:function(){var t=this,e=new Promise(function(e,r){axios.get("/api/contacts/get-all-contacts/").then(function(r){t.contacts=r.data.contacts,e()}).catch(function(t){console.log(t),r()})}),r=new Promise(function(e,r){axios.get("/api/warehouses/get-all-warehouses").then(function(r){t.warehouses=r.data.warehouses,e()}).catch(function(t){console.log(t),r()})}),a=new Promise(function(e,r){axios.get("/api/items/get-all-items/").then(function(r){t.items=r.data.items,e()}).catch(function(t){console.log(t),r()})}),i=new Promise(function(e,r){axios.get("/api/purchase-orders/get-all-purchase-orders/").then(function(r){t.purchaseOrders=r.data.purchase_orders,e()}).catch(function(t){console.log(t),r()})});Promise.all([e,r,a,i]).then(function(){t.ifReady=!0})},computed:{subtotalRow:function(){return this.received_items.map(function(t){return Number(t.quantity*t.item_pricelist.price)})},total:function(){return this.received_items.reduce(function(t,e){return t+e.quantity*e.item_pricelist.price},0)}},filters:{Decimal:function(t){if(t)return t.toFixed(2)}},methods:{viewROs:function(){this.$router.push({name:"receive-orders.index"})},getPoDetails:function(t){var e=this;axios.get("/api/purchase-orders/"+t).then(function(t){e.purchaseOrderData=t.data.purchaseOrder,console.log(t.data.purchaseOrder),e.contact=t.data.purchaseOrder.contact.person,e.contact_id=t.data.purchaseOrder.contact_id,e.received_items=t.data.purchaseOrder.purchase_order_items,e.warehouse_id=t.data.purchaseOrder.warehouse.id,resolve()}).catch(function(t){console.log(t),reject()})},selectPurchaseOrder:function(){this.purchase_order_id=this.purchaseOrder.id,this.reference_number=this.purchaseOrder.reference_number,this.getPoDetails(this.purchaseOrder.id)},updateTotalAmount:function(){this.received_items.forEach(function(t){t.subTotal})},deleteRow:function(t){this.received_items.splice(t,1),this.updateTotalAmount(),this.poQuantity.splice(t,1)},createNewReceiveOrder:function(){var t=this;this.ifReady=!1;var e=[];this.$data.received_items.forEach(function(r){e.push({item_id:r.item_id,quantity:r.quantity,unit_of_measurement_id:r.unit_of_measurement_id,item_pricelist_id:r.item_pricelist_id,tracking_number:t.$data.ro_number,expiration_date:moment(r.expiration_date).format("YYYY-MM-DD")})});var r={reference_number:this.$data.ro_number,contact_id:this.$data.contact_id,receive_order_items:e,purchase_order_id:this.purchase_order_id};axios.post("/api/receive-orders",r).then(function(e){console.log(e.data),t.$router.push({name:"receive-orders.index"})}).catch(function(e){console.log(e),alert("Error! Can't create receive order"),t.ifReady=!0})}}}},kgbK:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".dateStyle input:-moz-read-only{background-color:#fff!important}.dateStyle input:read-only{background-color:#fff!important}",""])},sWt2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("div",{staticClass:"p-md-4"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewROs(e)}}},[t._v("Receive Orders")]),t._v(" "),r("a",{staticClass:"text-secondary"},[t._v(" / Create New Receive Order")])]),t._v(" "),r("div",{staticClass:"card-body"},[t.ifReady?r("div",[r("form",{on:{submit:function(e){return e.preventDefault(),t.createNewReceiveOrder(e)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 form-group"},[r("label",[t._v("Purchase Order")]),t._v(" "),r("vue-select",{attrs:{label:"reference_number",options:t.purchaseOrders,required:""},on:{input:function(e){t.selectPurchaseOrder()}},model:{value:t.purchaseOrder,callback:function(e){t.purchaseOrder=e},expression:"purchaseOrder"}})],1),t._v(" "),r("div",{staticClass:"col-md-6 form-group"},[r("label",[t._v("Supplier")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-md-6 form-group"},[r("label",[t._v("Received Order #")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.ro_number,expression:"ro_number"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.ro_number},on:{input:function(e){e.target.composing||(t.ro_number=e.target.value)}}})])]),t._v(" "),r("br"),t._v(" "),t._m(1),t._v(" "),r("br"),t._v(" "),r("table",{staticClass:"table table-hover table-sm"},[t._m(2),t._v(" "),r("tbody",[t._l(t.received_items,function(e,a){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.item.stock_keeping_unit))]),t._v(" "),r("td",[t._v(t._s(e.item.name))]),t._v(" "),r("td",[t._v(t._s(e.item.description))]),t._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.quantity},on:{input:function(r){r.target.composing||t.$set(e,"quantity",r.target.value)}}})]),t._v(" "),r("td",[t._v(t._s(e.unit_of_measurement.name))]),t._v(" "),r("td",[t._v(t._s(e.item_pricelist.price))]),t._v(" "),r("td",[r("div",{staticClass:"dateStyle"},[r("datepicker",{attrs:{"bootstrap-styling":!0,placeholder:"Expiration Date",required:""},model:{value:e.expiration_date,callback:function(r){t.$set(e,"expiration_date",r)},expression:"item.expiration_date"}})],1)]),t._v(" "),r("td",[t._v(t._s(t._f("Decimal")(t.subtotalRow[a])))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){t.deleteRow(a)}}},[r("i",{staticClass:"far fa-times-circle"})])])])}),t._v(" "),r("tr",[r("td",{attrs:{colspan:"6"}}),t._v(" "),t._m(3),t._v(" "),r("td",[t._v(t._s(t._f("Decimal")(t.total)))]),t._v(" "),r("td")])],2)]),t._v(" "),r("div",{staticClass:"pt-3"},[r("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewROs(e)}}},[r("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")]),t._v(" "),r("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[r("i",{staticClass:"fas fa-plus"}),t._v(" Create New Receive Order")])])])]):r("div",[t._m(4)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-title"},[e("h4",{staticClass:"module-title"},[this._v("RECEIVE ORDER")]),this._v(" "),e("hr",{staticClass:"title-border"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",[e("b",[e("u",[this._v("Receive Order Items")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("SKU")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Description")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Qty")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("UOM")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Unit Price")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Expiration")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Amount")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}}});
//# sourceMappingURL=4.js.map