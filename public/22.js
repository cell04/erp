webpackJsonp([22],{"1ysb":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[e._v("\n            "+e._s(e.componentVal)+"s / Create New "+e._s(e.componentVal)+"\n        ")]),e._v(" "),s("div",{staticClass:"card-body"},[e.ifReady?s("div",[s("form",{on:{submit:function(t){return t.preventDefault(),e.createNewStockRequest(t)}}},[s("div",{staticClass:"row"},["warehouse"===e.stock_requestable_from_type?s("div",{staticClass:"col-md-6 form-group"},[s("label",[e._v("Warehouse ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedWarehouse.name,expression:"selectedWarehouse.name"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.selectedWarehouse.name},on:{input:function(t){t.target.composing||e.$set(e.selectedWarehouse,"name",t.target.value)}}})]):e._e(),e._v(" "),"branch"===e.stock_requestable_from_type?s("div",{staticClass:"col-md-6 form-group"},[s("label",[e._v("Branch ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedBranch.name,expression:"selectedBranch.name"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.selectedBranch.name},on:{input:function(t){t.target.composing||e.$set(e.selectedBranch,"name",t.target.value)}}})]):e._e(),e._v(" "),s("div",{staticClass:"col-md-6 form-group"},[s("label",[e._v("Select where to get stocks: ")]),e._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_radio_button,expression:"selected_radio_button"}],attrs:{type:"radio",value:"warehouse"},domProps:{checked:e._q(e.selected_radio_button,"warehouse")},on:{change:function(t){e.selected_radio_button="warehouse"}}}),e._v(" Warehouse\n                                "),s("vue-select",{directives:[{name:"show",rawName:"v-show",value:"warehouse"===e.selected_radio_button,expression:"selected_radio_button === 'warehouse'"}],staticClass:"mb-2",attrs:{label:"name",options:e.warehouses},on:{input:function(t){e.selectWarehouse(e.warehouseData.id)}},model:{value:e.warehouseData,callback:function(t){e.warehouseData=t},expression:"warehouseData"}})],1),e._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_radio_button,expression:"selected_radio_button"}],attrs:{type:"radio",value:"branch"},domProps:{checked:e._q(e.selected_radio_button,"branch")},on:{change:function(t){e.selected_radio_button="branch"}}}),e._v(" Branch\n                                "),s("vue-select",{directives:[{name:"show",rawName:"v-show",value:"branch"===e.selected_radio_button,expression:"selected_radio_button === 'branch'"}],staticClass:"mb-2",attrs:{label:"name",options:e.branches},on:{input:function(t){e.selectBranch(e.branchData.id)}},model:{value:e.branchData,callback:function(t){e.branchData=t},expression:"branchData"}})],1)])]),e._v(" "),s("br"),e._v(" "),s("table",{staticClass:"table table-hover table-sm"},[e._m(0),e._v(" "),e._m(1),e._v(" "),s("tbody",e._l(e.stock_request_items,function(t,a){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.sku))]),e._v(" "),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.item_id,expression:"item.item_id"}],staticClass:"form-control",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"item_id",s.target.multiple?a:a[0])},function(s){e.onSelectItem(t.item_id,a)}]}},[s("option",{attrs:{value:"",disabled:"",hidden:""}},[e._v("Select Item")]),e._v(" "),e._l(e.itemsList,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2)]),e._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-control",domProps:{value:t.quantity},on:{input:function(s){s.target.composing||e.$set(t,"quantity",e._n(s.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("td",[e._v(e._s(t.unit_of_measurement_name))]),e._v(" "),s("td",[s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:e.deleteRow}},[e._v("Remove")])])])})),e._v(" "),s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.addRow}},[e._v("Add Row")])]),e._v(" "),s("button",{staticClass:"btn btn-success btn-sm mt-5",attrs:{type:"submit"}},[e._v("Create New "+e._s(e.componentVal))])])]):s("div",[e._m(2)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("caption",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[e._v("SKU")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Name")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Quantity")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("UOM")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},"9DIb":function(e,t,s){var a=s("VU/8")(s("K/Hu"),s("1ysb"),!1,null,null,null);e.exports=a.exports},"K/Hu":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{componentVal:"Stock Request",ifReady:!0,warehouseData:null,branchData:null,itemData:null,selected_radio_button:"",stock_requestable_from_id:null,stock_requestable_from_type:null,stock_requestable_to_id:null,stock_requestable_to_type:null,selectedWarehouse:"",selectedBranch:"",warehouses:[],branches:[],itemsList:[],stock_request_items:[],sub_department_id:"",warehouse_id:"",branch_id:"",item_id:""}},mounted:function(){var e=this;this.stock_requestable_from_id=this.$route.params.id,this.stock_requestable_from_id=this.$route.params.id,this.stock_requestable_from_type=this.$route.query.type;new Promise(function(t,s){axios.get("/api/warehouses/"+e.$route.params.id).then(function(s){e.selectedWarehouse=s.data.warehouse,t()})}),new Promise(function(t,s){axios.get("/api/branches/"+e.$route.params.id).then(function(s){e.selectedBranch=s.data.branch,t()})}),new Promise(function(t,s){axios.get("/api/warehouses/get-all-warehouses/").then(function(s){e.warehouses=s.data.warehouses,s.data&&t()})}),new Promise(function(t,s){axios.get("/api/branches/get-all-branches/").then(function(s){e.branches=s.data.branches,s.data&&t()})}),new Promise(function(t,s){axios.get("/api/items/get-all-items/").then(function(s){console.log("Items: "+JSON.stringify(s.data)),e.itemsList=s.data.items,s.data&&t()})});this.addRow()},methods:{selectWarehouse:function(e){this.warehouse_id=e,this.stock_requestable_to_id=e,this.stock_requestable_to_type="warehouse",this.branch_id=null,this.branchData=void 0,console.log("warehouse_id: "+this.warehouse_id)},selectBranch:function(e){this.branch_id=e,this.stock_requestable_to_id=e,this.stock_requestable_to_type="branch",this.warehouse_id=null,this.warehouseData=void 0,console.log("branch_id: "+this.branch_id)},selectItem:function(){this.item_id=this.itemData.id,console.log("item_id: "+this.item_id)},onSelectItem:function(e,t){console.log(e,t);var s=t,a=this.itemsList.find(function(t){return t.id===e});console.log(a),this.stock_request_items[s].sku=a.stock_keeping_unit,this.stock_request_items[s].item_id=a.id,this.stock_request_items[s].unit_of_measurement_id=a.default_unit_of_measurement_id,this.stock_request_items[s].unit_of_measurement_name=a.default_unit_of_measurement.name},addRow:function(){this.stock_request_items.push({sku:"",item_id:"",quantity:"",unit_of_measurement_id:"",unit_of_measurement_name:""})},deleteRow:function(e){this.stock_request_items.splice(e,1)},createNewStockRequest:function(){var e=this,t=[];this.$data.stock_request_items.forEach(function(e){t.push({item_id:e.item_id,quantity:e.quantity,unit_of_measurement_id:e.unit_of_measurement_id})});var s={stock_requestable_from_id:this.stock_requestable_from_id,stock_requestable_from_type:this.stock_requestable_from_type,stock_requestable_to_id:this.stock_requestable_to_id,stock_requestable_to_type:this.stock_requestable_to_type,stock_request_items:t};console.log(s),axios.post("/api/stock-requests",s).then(function(t){console.log(JSON.stringify(t.data)),e.$router.push({name:"stock-requests.index"})}).catch(function(e){console.log(e),alert("Error! Can't create stock request")})}}}}});
//# sourceMappingURL=22.js.map