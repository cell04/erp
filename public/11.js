webpackJsonp([11],{"9iM8":function(t,e,a){var o=a("VU/8")(a("I+qp"),a("Jzfa"),!1,function(t){a("wZT+")},null,null);t.exports=o.exports},"I+qp":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,contactData:null,from_selected_radio_button:"",fromWarehouse:null,fromBranch:null,warehouses:[],branches:[],location_id:null,location_type:null,contacts:[],contact:null,contact_id:"",bid_sheet_number:"",bid_sheet_date:"",project_title:"",description:"",amount:"",quotation_items:[{item:"",item_id:"",quantity:"",unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",price:0,subTotal:0}],isDisabled:!1,tax_value:""}},filters:{Decimal:function(t){if(t)return t.toFixed(2)}},mounted:function(){var t=this,e=new Promise(function(e,a){axios.get("/api/contacts/get-all-contacts/").then(function(a){t.contacts=a.data.contacts.filter(function(t){return 1==t.contact_type_id}),e()}).catch(function(t){console.log(t),a()})}),a=new Promise(function(e,a){axios.get("/api/branches/get-all-branches/").then(function(a){t.branches=a.data.branches,e()}).catch(function(t){console.log(t),a()})}),o=new Promise(function(e,a){axios.get("/api/warehouses/get-all-warehouses/").then(function(a){t.warehouses=a.data.warehouses,e()}).catch(function(t){console.log(t),a()})});Promise.all([e,a,o]).then(function(){t.ifReady=!0}),this.autoGenerateBidSheetNumber()},computed:{},methods:{viewBidSheets:function(){this.$router.push({name:"bid-sheets.index"})},getContactData:function(t){var e=this;axios.get("/api/contacts/"+t).then(function(t){e.contactData=t.data.contact,resolve()}).catch(function(t){console.log(t),reject()})},autoGenerateBidSheetNumber:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].join("");this.bid_sheet_number=e,console.log("Code: "+e)},selectContact:function(){this.contact_id=this.contact.id,this.getContactData(this.contact_id)},selectFromBranch:function(){this.location_id=this.fromBranch.id,this.location_type="App\\Branch",console.log("Branch - From: "+this.location_id+" type: "+this.location_type)},selectFromWarehouse:function(){this.location_id=this.fromWarehouse.id,this.location_type="App\\Warehouse",console.log("Warehouse - From: "+this.location_id+" type: "+this.location_type)},createNewQuotation:function(){var t=this;this.ifReady=!1;var e={bid_sheet_number:"BN"+this.bid_sheet_number,contact_id:this.$data.contact_id,bid_sheet_date:moment(this.$data.bid_sheet_date).format("YYYY-MM-DD"),project_title:this.project_title,description:this.description,amount:this.amount,location_id:this.location_id,location_type:this.location_type};axios.post("/api/bid-sheets",e).then(function(e){console.log(e.data),t.$router.push({name:"bid-sheets.index"})}).catch(function(e){console.log(e),alert("Error! Can't create quotation"),t.ifReady=!0})}}}},Jzfa:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"p-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewBidSheets(e)}}},[t._v("Bid Sheet")]),t._v(" "),a("a",{staticClass:"text-secondary"},[t._v(" / Create New Bid Sheet")])]),t._v(" "),a("div",{staticClass:"card-body"},[t.ifReady?a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.createNewQuotation(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Bid Sheet Number")]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.bid_sheet_number,expression:"bid_sheet_number"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Bid Sheet #","aria-label":"Input group example","aria-describedby":"btnGroupAddon",readonly:""},domProps:{value:t.bid_sheet_number},on:{input:function(e){e.target.composing||(t.bid_sheet_number=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Customer")]),t._v(" "),a("vue-select",{attrs:{label:"person",options:t.contacts,required:""},on:{input:function(e){t.selectContact()}},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Project Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.project_title,expression:"project_title"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Project Title"},domProps:{value:t.project_title},on:{input:function(e){e.target.composing||(t.project_title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Description")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Amount")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Amount"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("div",{staticClass:"dateStyle"},[a("label",[t._v("Bid Sheet Date")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,placeholder:"Bid Sheet Date",required:""},model:{value:t.bid_sheet_date,callback:function(e){t.bid_sheet_date=e},expression:"bid_sheet_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Location")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from_selected_radio_button,expression:"from_selected_radio_button"}],attrs:{type:"radio",value:"warehouse"},domProps:{checked:t._q(t.from_selected_radio_button,"warehouse")},on:{change:function(e){t.from_selected_radio_button="warehouse"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("  Warehouse")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from_selected_radio_button,expression:"from_selected_radio_button"}],attrs:{type:"radio",value:"branch"},domProps:{checked:t._q(t.from_selected_radio_button,"branch")},on:{change:function(e){t.from_selected_radio_button="branch"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("  Branch")])]),t._v(" "),a("vue-select",{directives:[{name:"show",rawName:"v-show",value:"warehouse"===t.from_selected_radio_button,expression:"from_selected_radio_button === 'warehouse'"}],attrs:{label:"name",options:t.warehouses,required:""},on:{input:function(e){t.selectFromWarehouse()}},model:{value:t.fromWarehouse,callback:function(e){t.fromWarehouse=e},expression:"fromWarehouse"}}),t._v(" "),a("vue-select",{directives:[{name:"show",rawName:"v-show",value:"branch"===t.from_selected_radio_button,expression:"from_selected_radio_button === 'branch'"}],attrs:{label:"name",options:t.branches,required:""},on:{input:function(e){t.selectFromBranch()}},model:{value:t.fromBranch,callback:function(e){t.fromBranch=e},expression:"fromBranch"}})],1),t._v(" "),null!==t.contactData?a("div",{staticClass:"col-md-12 form-group"},[a("hr"),t._v(" "),t._m(2),t._v(" "),a("div",[t._m(3),t._v(": "+t._s(t.contactData.person))]),t._v(" "),a("div",[t._m(4),t._v(": "+t._s(t.contactData.company))]),t._v(" "),a("div",[t._m(5),t._v(": "+t._s(t.contactData.company_address))]),t._v(" "),a("div",[t._m(6),t._v(": "+t._s(t.contactData.email))]),t._v(" "),a("div",[t._m(7),t._v(": "+t._s(t.contactData.mobile_number))]),t._v(" "),a("hr")]):t._e()]),t._v(" "),a("div",{staticClass:"pt-3"},[a("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewBidSheets(e)}}},[a("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Create New Bid Sheet")])])])]):a("div",[t._m(8)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-title"},[e("h4",{staticClass:"module-title"},[this._v("BID SHEET")]),this._v(" "),e("hr",{staticClass:"title-border"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text",attrs:{id:"btnGroupAddon"}},[this._v("BN")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",[e("u",[this._v("Customer Information:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Customer")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Company")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Address")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Email")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Phone")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},OrWo:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"td{width:100px!important}.dateStyle input:-moz-read-only{background-color:#fff!important}.dateStyle input:read-only{background-color:#fff!important}",""])},"wZT+":function(t,e,a){var o=a("OrWo");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("dfb183ea",o,!0,{})}});
//# sourceMappingURL=11.js.map