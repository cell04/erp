webpackJsonp([47],{"X/5R":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{ifReady:!1,purchaseOrder:null,total:0}},filters:{Decimal:function(e){if(e)return e.toFixed(2)}},mounted:function(){var e=this;new Promise(function(t,s){axios.get("/api/purchase-orders/"+e.$route.params.id).then(function(s){console.log(s.data),e.purchaseOrder=s.data.purchaseOrder,e.purchaseOrder.purchase_order_items.map(function(t){t.subTotal=t.quantity*t.item_pricelist.price,e.total+=t.subTotal}),t()}).catch(function(e){console.log(e),s()})}).then(function(){e.ifReady=!0})},methods:{viewPurchaseOrders:function(){this.$router.push({name:"purchase-orders.index"})},closePurchaseOrder:function(e,t){var s={id:e};confirm("Are you sure you want to close ".concat(t))&&axios.post("/api/purchase-orders/close",s).then(function(e){alert("Success! ".concat(t," is now closed")),location.reload()}).catch(function(e){console.log(e),alert("Error! Can't close purchase order")})}}}},Zo5a:function(e,t,s){var r=s("VU/8")(s("X/5R"),s("lhRM"),!1,null,null,null);e.exports=r.exports},lhRM:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),s("div",{staticClass:"p-md-4"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.viewPurchaseOrders(t)}}},[e._v("Purchase Orders")]),e._v(" "),s("a",{staticClass:"text-secondary"},[e._v(" / View Purchase Order")])]),e._v(" "),s("div",{staticClass:"card-body"},[e.ifReady?s("div",[0===e.purchaseOrder.status?s("div",[e._m(1)]):1===e.purchaseOrder.status?s("div",[e._m(2)]):s("div",[e._m(3)]),e._v(" "),s("fieldset",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Purchase Order #")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.reference_number,expression:"purchaseOrder.reference_number"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.purchaseOrder.reference_number},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"reference_number",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Date")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.date,expression:"purchaseOrder.date"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.purchaseOrder.date},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"date",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Supplier")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.contact.person,expression:"purchaseOrder.contact.person"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.purchaseOrder.contact.person},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder.contact,"person",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Warehouse")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.warehouse.name,expression:"purchaseOrder.warehouse.name"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.purchaseOrder.warehouse.name},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder.warehouse,"name",t.target.value)}}})])])])]),e._v(" "),s("br"),e._v(" "),s("legend",[e._v("Purchase Order Items")]),e._v(" "),s("table",{staticClass:"table table-hover table-sm"},[e._m(4),e._v(" "),s("tbody",[e._l(e.purchaseOrder.purchase_order_items,function(t,r){return s("tr",{key:r},[s("td",[e._v(e._s(t.item.stock_keeping_unit))]),e._v(" "),s("td",[e._v(e._s(t.item.name))]),e._v(" "),s("td",[e._v(e._s(t.item.description))]),e._v(" "),s("td",[e._v(e._s(t.quantity))]),e._v(" "),s("td",[e._v(e._s(t.receive_quantity))]),e._v(" "),s("td",[e._v(e._s(t.quantity-t.receive_quantity))]),e._v(" "),s("td",[e._v(e._s(t.unit_of_measurement.name))]),e._v(" "),s("td",[e._v(e._s(t.item_pricelist.price))]),e._v(" "),s("td",{attrs:{align:"right"}},[e._v(e._s(e._f("Decimal")(t.subTotal)))])])}),e._v(" "),s("tr",[s("td",{attrs:{colspan:"7"}}),e._v(" "),e._m(5),e._v(" "),s("td",{attrs:{align:"right"}},[s("b",[e._v(e._s(e._f("Decimal")(e.total)))])])])],2)]),e._v(" "),s("br"),e._v(" "),s("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.viewPurchaseOrders(t)}}},[s("i",{staticClass:"fas fa-chevron-left"}),e._v(" Back")]),e._v(" "),0==e.purchaseOrder.status?s("router-link",{attrs:{to:{name:"receive-orders.receive",params:{po_id:e.purchaseOrder.id}}}},[s("button",{staticClass:"btn btn-success btn-sm"},[s("i",{staticClass:"fas fa-plus"}),e._v(" Receive PO")])]):e._e()],1):s("div",[e._m(6)])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content-title"},[t("h4",{staticClass:"module-title"},[this._v("PURCHASE ORDER")]),this._v(" "),t("hr",{staticClass:"title-border"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h5",[this._v("\n                            Purchase Order\n                            "),t("span",{staticClass:"badge badge-secondary badge-info"},[this._v("Issued")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h5",[this._v("\n                            Purchase Order\n                            "),t("span",{staticClass:"badge badge-secondary badge-success"},[this._v("Payed")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h5",[this._v("\n                            Purchase Order\n                            "),t("span",{staticClass:"badge badge-secondary badge-danger"},[this._v("Cancelled")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[e._v("SKU")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Item Name")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Description")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Qty")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Received Qty")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Remaining Qty")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("UoM")]),e._v(" "),s("th",{attrs:{scope:"col"}},[e._v("Price")]),e._v(" "),s("th",{staticClass:"text-right"},[e._v("Sub Total")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("b",[this._v("Total")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}}});
//# sourceMappingURL=47.js.map