{"version":3,"sources":["webpack:///./resources/js/views/purchase-orders/Create.vue","webpack:///./resources/js/views/purchase-orders/Create.vue?f052","webpack:///resources/js/views/purchase-orders/Create.vue"],"names":["Component","__webpack_require__","normalizeComponent","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","submit","$event","preventDefault","createNewPurchaseOrder","directives","name","rawName","value","expression","attrs","type","required","domProps","input","target","composing","order_date","change","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","_value","contact_id","multiple","disabled","hidden","_l","contact","key","id","_s","person","sub_department_id","department","reference_number","_m","item","sku","$set","onSelectItem","item_id","modifiers","number","_n","blur","$forceUpdate","unit_name","subtotalRow","click","deleteRow","total","addRow","staticRenderFns","scope","staticStyle","width","role","aria-valuenow","aria-valuemin","aria-valuemax","__webpack_exports__","data","ifReady","contacts","warehouses","itemsList","items","amount","mounted","_this","Promise","resolve","reject","axios","get","then","res","response","computed","Number","quantity","unit_price","reduce","methods","index","Index","selectedItem","find","y","console","log","SKU","unit_id","purchase_unit_id","purchase_uom","purchase_price","push","splice","_this2","newItems","$data","forEach","element","formData","warehouse_id","post","JSON","stringify","$router","catch","err","alert"],"mappings":"0CAAA,IAaAA,EAbyBC,EAAQ,OAajCC,CAXqBD,EAAQ,QAENA,EAAQ,SAE/B,EAEA,KAEA,KAEA,MAUAE,EAAAC,QAAAJ,EAAAI,4BCpBAD,EAAAC,SAAkBC,OAFlB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,gBAA0BN,EAAAO,GAAA,yEAAAP,EAAAO,GAAA,KAAAH,EAAA,OAAwGE,YAAA,cAAwBN,EAAA,QAAAI,EAAA,OAAAA,EAAA,QAAqCI,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwBX,EAAAY,uBAAAF,OAA4CN,EAAA,OAAYE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,wBAAkCF,EAAA,SAAAJ,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAH,EAAA,SAAuDS,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,WAAAiB,WAAA,eAA8EX,YAAA,eAAAY,OAAoCC,KAAA,OAAAC,SAAA,IAA4BC,UAAWL,MAAAhB,EAAA,YAAyBQ,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCxB,EAAAyB,WAAAf,EAAAa,OAAAP,aAAqChB,EAAAO,GAAA,KAAAH,EAAA,OAA0BE,YAAA,wBAAkCF,EAAA,SAAAJ,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAH,EAAA,UAA2DS,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,WAAAiB,WAAA,eAA8EX,YAAA,eAAAY,OAAoCE,SAAA,IAAcZ,IAAKkB,OAAA,SAAAhB,GAA0B,IAAAiB,EAAAC,MAAAC,UAAAC,OAAAC,KAAArB,EAAAa,OAAAS,QAAA,SAAAC,GAAkF,OAAAA,EAAAC,WAAkBC,IAAA,SAAAF,GAA+D,MAA7C,WAAAA,IAAAG,OAAAH,EAAAjB,QAA0DhB,EAAAqC,WAAA3B,EAAAa,OAAAe,SAAAX,IAAA,OAA4EvB,EAAA,UAAec,OAAOF,MAAA,GAAAuB,SAAA,GAAAC,OAAA,MAAsCxC,EAAAO,GAAA,oBAAAP,EAAAO,GAAA,KAAAP,EAAAyC,GAAAzC,EAAA,kBAAA0C,GAAiF,OAAAtC,EAAA,UAAoBuC,IAAAD,EAAAE,GAAAvB,UAAyBL,MAAA0B,EAAAE,MAAoB5C,EAAAO,GAAAP,EAAA6C,GAAAH,EAAAI,cAAmC,KAAA9C,EAAAO,GAAA,KAAAH,EAAA,OAA8BE,YAAA,wBAAkCF,EAAA,SAAAJ,EAAAO,GAAA,eAAAP,EAAAO,GAAA,KAAAH,EAAA,UAA6DS,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,kBAAAiB,WAAA,sBAA4FX,YAAA,eAAAY,OAAoCE,SAAA,IAAcZ,IAAKkB,OAAA,SAAAhB,GAA0B,IAAAiB,EAAAC,MAAAC,UAAAC,OAAAC,KAAArB,EAAAa,OAAAS,QAAA,SAAAC,GAAkF,OAAAA,EAAAC,WAAkBC,IAAA,SAAAF,GAA+D,MAA7C,WAAAA,IAAAG,OAAAH,EAAAjB,QAA0DhB,EAAA+C,kBAAArC,EAAAa,OAAAe,SAAAX,IAAA,OAAmFvB,EAAA,UAAec,OAAOF,MAAA,GAAAuB,SAAA,GAAAC,OAAA,MAAsCxC,EAAAO,GAAA,sBAAAP,EAAAO,GAAA,KAAAP,EAAAyC,GAAAzC,EAAA,oBAAAgD,GAAwF,OAAA5C,EAAA,UAAoBuC,IAAAK,EAAAJ,GAAAvB,UAA4BL,MAAAgC,EAAAJ,MAAuB5C,EAAAO,GAAAP,EAAA6C,GAAAG,EAAAlC,YAAoC,KAAAd,EAAAO,GAAA,KAAAH,EAAA,OAA8BE,YAAA,wBAAkCF,EAAA,SAAAJ,EAAAO,GAAA,iBAAAP,EAAAO,GAAA,KAAAH,EAAA,SAA8DS,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAhB,EAAA,iBAAAiB,WAAA,qBAA0FX,YAAA,eAAAY,OAAoCC,KAAA,OAAAC,SAAA,IAA4BC,UAAWL,MAAAhB,EAAA,kBAA+BQ,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCxB,EAAAiD,iBAAAvC,EAAAa,OAAAP,eAA2ChB,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAA,KAAAH,EAAA,SAAmDE,YAAA,+BAAyCN,EAAAkD,GAAA,GAAAlD,EAAAO,GAAA,KAAAP,EAAAkD,GAAA,GAAAlD,EAAAO,GAAA,KAAAH,EAAA,SAAAJ,EAAAyC,GAAAzC,EAAA,eAAAmD,EAAAR,GAAgG,OAAAvC,EAAA,MAAgBuC,IAAAQ,EAAAP,KAAYxC,EAAA,MAAAJ,EAAAO,GAAAP,EAAA6C,GAAAM,EAAAC,QAAApD,EAAAO,GAAA,KAAAH,EAAA,MAAAA,EAAA,UAAwES,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAmC,EAAA,QAAAlC,WAAA,iBAA8EX,YAAA,eAAAY,OAAoCE,SAAA,IAAcZ,IAAKkB,QAAA,SAAAhB,GAA2B,IAAAiB,EAAAC,MAAAC,UAAAC,OAAAC,KAAArB,EAAAa,OAAAS,QAAA,SAAAC,GAAkF,OAAAA,EAAAC,WAAkBC,IAAA,SAAAF,GAA+D,MAA7C,WAAAA,IAAAG,OAAAH,EAAAjB,QAA0DhB,EAAAqD,KAAAF,EAAA,UAAAzC,EAAAa,OAAAe,SAAAX,IAAA,KAAsF,SAAAjB,GAAkBV,EAAAsD,aAAAH,EAAAI,QAAAZ,QAAuCvC,EAAA,UAAec,OAAOF,MAAA,GAAAuB,SAAA,GAAAC,OAAA,MAAsCxC,EAAAO,GAAA,iBAAAP,EAAAO,GAAA,KAAAP,EAAAyC,GAAAzC,EAAA,mBAAAmD,GAA4E,OAAA/C,EAAA,UAAoBuC,IAAAQ,EAAAP,GAAAvB,UAAsBL,MAAAmC,EAAAP,MAAiB5C,EAAAO,GAAAP,EAAA6C,GAAAM,EAAArC,YAA8B,KAAAd,EAAAO,GAAA,KAAAH,EAAA,MAAAA,EAAA,SAAyCS,aAAaC,KAAA,QAAAC,QAAA,iBAAAC,MAAAmC,EAAA,SAAAlC,WAAA,gBAAAuC,WAAkGC,QAAA,KAAenD,YAAA,eAAAY,OAAoCE,SAAA,IAAcC,UAAWL,MAAAmC,EAAA,UAAwB3C,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,WAAsCxB,EAAAqD,KAAAF,EAAA,WAAAnD,EAAA0D,GAAAhD,EAAAa,OAAAP,SAAwD2C,KAAA,SAAAjD,GAAyBV,EAAA4D,qBAAqB5D,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAAP,EAAA6C,GAAAM,EAAAU,cAAA7D,EAAAO,GAAA,KAAAH,EAAA,MAAAA,EAAA,SAA2FS,aAAaC,KAAA,QAAAC,QAAA,iBAAAC,MAAAmC,EAAA,WAAAlC,WAAA,kBAAAuC,WAAsGC,QAAA,KAAenD,YAAA,eAAAe,UAAuCL,MAAAmC,EAAA,YAA0B3C,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,WAAsCxB,EAAAqD,KAAAF,EAAA,aAAAnD,EAAA0D,GAAAhD,EAAAa,OAAAP,SAA0D2C,KAAA,SAAAjD,GAAyBV,EAAA4D,qBAAqB5D,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAAP,EAAA6C,GAAA7C,EAAA8D,YAAAnB,OAAA3C,EAAAO,GAAA,KAAAH,EAAA,MAAAA,EAAA,UAAkGE,YAAA,wBAAAY,OAA2CC,KAAA,UAAgBX,IAAKuD,MAAA/D,EAAAgE,aAAuBhE,EAAAO,GAAA,kBAAyBP,EAAAO,GAAA,KAAAH,EAAA,MAAAA,EAAA,MAAAJ,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAA,KAAAP,EAAAkD,GAAA,GAAAlD,EAAAO,GAAA,KAAAH,EAAA,MAAAJ,EAAAO,GAAAP,EAAA6C,GAAA7C,EAAAiE,UAAAjE,EAAAO,GAAA,KAAAH,EAAA,YAAAJ,EAAAO,GAAA,KAAAH,EAAA,UAA0NE,YAAA,yBAAAY,OAA4CC,KAAA,UAAgBX,IAAKuD,MAAA/D,EAAAkE,UAAoBlE,EAAAO,GAAA,eAAAP,EAAAO,GAAA,KAAAH,EAAA,UAAiDE,YAAA,yBAAAY,OAA4CC,KAAA,YAAiBnB,EAAAO,GAAA,mCAAAH,EAAA,OAAAJ,EAAAkD,GAAA,YAEhyKiB,iBADlB,WAAoC,IAAajE,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAAA,EAAA,OAA+BE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,kBAA6B,WAAc,IAAAN,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,SAAAA,EAAA,MAAAA,EAAA,MAAqCc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,SAAAP,EAAAO,GAAA,KAAAH,EAAA,MAAuCc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAH,EAAA,MAAwCc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAH,EAAA,MAA4Cc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,SAAAP,EAAAO,GAAA,KAAAH,EAAA,MAAuCc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAH,EAAA,MAA8Cc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,YAAAP,EAAAO,GAAA,KAAAH,EAAA,MAA0Cc,OAAOkD,MAAA,SAAepE,EAAAO,GAAA,iBAAyB,WAAc,IAAaL,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAAA,EAAA,KAA/DH,KAA+DM,GAAA,cAA4C,WAAc,IAAaL,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,0DAAA+D,aAAmFC,MAAA,QAAepD,OAAQqD,KAAA,cAAAC,gBAAA,MAAAC,gBAAA,IAAAC,gBAAA,kGCuGhkCC,EAAA,SACAC,KADA,WAEA,OACAC,SAAA,EACAC,SAAA,GACAC,WAAA,GACAC,UAAA,GACA/B,iBAAA,GACAZ,WAAA,GACAZ,WAAA,GACAsB,kBAAA,GACAkC,SACAC,OAAA,KAIAC,QAhBA,WAgBA,IAAAC,EAAAnF,KACA,IAAAoF,QAAA,SAAAC,EAAAC,GACAC,MAAAC,IAAA,mCAAAC,KAAA,SAAAC,GACAP,EAAAN,SAAAa,EAAAf,KAAAE,SACAa,EAAAf,KAAAgB,UAGAN,QAIA,IAAAD,QAAA,SAAAC,EAAAC,GACAC,MAAAC,IAAA,sCAAAC,KAAA,SAAAC,GACAP,EAAAL,WAAAY,EAAAf,KAAAG,WACAY,EAAAf,KAAAgB,UACAN,QAIA,IAAAD,QAAA,SAAAC,EAAAC,GACAC,MAAAC,IAAA,6BAAAC,KAAA,SAAAC,GACAP,EAAAJ,UAAAW,EAAAf,KAAAK,MACAU,EAAAf,KAAAgB,UAGAN,QAIArF,KAAAiE,UAGA2B,UACA/B,YADA,WAEA,OAAA7D,KAAAgF,MAAA9C,IAAA,SAAAgB,GACA,OAAA2C,OAAA3C,EAAA4C,SAAA5C,EAAA6C,eAGA/B,MANA,WAOA,OAAAhE,KAAAgF,MAAAgB,OAAA,SAAAhC,EAAAd,GACA,OAAAc,EAAAd,EAAA4C,SAAA5C,EAAA6C,YACA,KAIAE,SACA5C,aADA,SACAV,EAAAuD,GACA,IAAAC,EAAAD,EACAE,EAAApG,KAAA+E,UAAAsB,KAAA,SAAAC,GAAA,OAAAA,EAAA3D,SACA4D,QAAAC,IAAAJ,GACApG,KAAAgF,MAAAmB,GAAAhD,IAAAiD,EAAAK,IACAzG,KAAAgF,MAAAmB,GAAA7C,QAAA8C,EAAAzD,GACA3C,KAAAgF,MAAAmB,GAAAO,QAAAN,EAAAO,iBACA3G,KAAAgF,MAAAmB,GAAAvC,UAAAwC,EAAAQ,aAAA/F,KACAb,KAAAgF,MAAAmB,GAAAJ,WAAAK,EAAAS,gBAEA5C,OAXA,WAYAjE,KAAAgF,MAAA8B,MACA3D,IAAA,GACAG,QAAA,GACAwC,SAAA,GACAY,QAAA,GACA9C,UAAA,GACAmC,WAAA,MAGAhC,UArBA,SAqBAmC,GACAlG,KAAAgF,MAAA+B,OAAAb,EAAA,IAEAvF,uBAxBA,WAwBA,IAAAqG,EAAAhH,KACAiH,KACAjH,KAAAkH,MAAAlC,MAAAmC,QAAA,SAAAC,GACAH,EAAAH,MACAxD,QAAA8D,EAAA9D,QACAwC,SAAAsB,EAAAtB,SACAY,QAAAU,EAAAV,QACAX,WAAAqB,EAAArB,eAGA,IAAAsB,GACArE,iBAAAhD,KAAAkH,MAAAlE,iBACAZ,WAAApC,KAAAkH,MAAA9E,WACAZ,WAAAxB,KAAAkH,MAAA1F,WACA8F,aAAAtH,KAAAkH,MAAApE,kBACAmC,OAAAjF,KAAAgE,MACAgB,MAAAiC,GAGAV,QAAAC,IAAAa,GAEA9B,MAAAgC,KAAA,uBAAAF,GAAA5B,KAAA,SAAAC,GACAa,QAAAC,IAAAgB,KAAAC,UAAA/B,EAAAf,OACAqC,EAAAU,QAAAZ,MAAAjG,KAAA,4BACA8G,MAAA,SAAAC,GACArB,QAAAC,IAAAoB,GACAC,MAAA","file":"25.js","sourcesContent":["var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = require(\"!!babel-loader?{\\\"cacheDirectory\\\":true,\\\"presets\\\":[[\\\"env\\\",{\\\"modules\\\":false,\\\"targets\\\":{\\\"browsers\\\":[\\\"> 2%\\\"],\\\"uglify\\\":true}}]],\\\"plugins\\\":[\\\"transform-object-rest-spread\\\",[\\\"transform-runtime\\\",{\\\"polyfill\\\":false,\\\"helpers\\\":false}],\\\"syntax-dynamic-import\\\"]}!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Create.vue\")\n/* template */\nvar __vue_template__ = require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17f258b5\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Create.vue\")\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/js/views/purchase-orders/Create.vue\n// module id = /0wF\n// module chunks = 25","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"\\n            Purchase Orders / Create New Purchase Order\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[(_vm.ifReady)?_c('div',[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createNewPurchaseOrder($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6 form-group\"},[_c('label',[_vm._v(\"Date\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.order_date),expression:\"order_date\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"required\":\"\"},domProps:{\"value\":(_vm.order_date)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.order_date=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6 form-group\"},[_c('label',[_vm._v(\"Contact\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.contact_id),expression:\"contact_id\"}],staticClass:\"form-control\",attrs:{\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.contact_id=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\",\"disabled\":\"\",\"hidden\":\"\"}},[_vm._v(\"Select Contact\")]),_vm._v(\" \"),_vm._l((_vm.contacts),function(contact){return _c('option',{key:contact.id,domProps:{\"value\":contact.id}},[_vm._v(_vm._s(contact.person))])})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6 form-group\"},[_c('label',[_vm._v(\"Warehouse\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sub_department_id),expression:\"sub_department_id\"}],staticClass:\"form-control\",attrs:{\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sub_department_id=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\",\"disabled\":\"\",\"hidden\":\"\"}},[_vm._v(\"Select Warehouse\")]),_vm._v(\" \"),_vm._l((_vm.warehouses),function(department){return _c('option',{key:department.id,domProps:{\"value\":department.id}},[_vm._v(_vm._s(department.name))])})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6 form-group\"},[_c('label',[_vm._v(\"Reference #\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.reference_number),expression:\"reference_number\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.reference_number)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.reference_number=$event.target.value}}})])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('table',{staticClass:\"table table-hover table-sm\"},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('tbody',[_vm._l((_vm.items),function(item,key){return _c('tr',{key:item.id},[_c('td',[_vm._v(_vm._s(item.sku))]),_vm._v(\" \"),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.item_id),expression:\"item.item_id\"}],staticClass:\"form-control\",attrs:{\"required\":\"\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(item, \"item_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.onSelectItem(item.item_id, key)}]}},[_c('option',{attrs:{\"value\":\"\",\"disabled\":\"\",\"hidden\":\"\"}},[_vm._v(\"Select Item\")]),_vm._v(\" \"),_vm._l((_vm.itemsList),function(item){return _c('option',{key:item.id,domProps:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])})],2)]),_vm._v(\" \"),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(item.quantity),expression:\"item.quantity\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"required\":\"\"},domProps:{\"value\":(item.quantity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"quantity\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(item.unit_name))]),_vm._v(\" \"),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(item.unit_price),expression:\"item.unit_price\",modifiers:{\"number\":true}}],staticClass:\"form-control\",domProps:{\"value\":(item.unit_price)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"unit_price\", _vm._n($event.target.value))},\"blur\":function($event){_vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.subtotalRow[key]))]),_vm._v(\" \"),_c('td',[_c('button',{staticClass:\"btn btn-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.deleteRow}},[_vm._v(\"Remove\")])])])}),_vm._v(\" \"),_c('tr',[_c('td'),_vm._v(\" \"),_c('td'),_vm._v(\" \"),_c('td'),_vm._v(\" \"),_c('td'),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.total))]),_vm._v(\" \"),_c('td')])],2),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addRow}},[_vm._v(\"Add Row\")])]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-success btn-sm\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Create New Purchase Order\")])])]):_c('div',[_vm._m(3)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('caption',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-3\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"SKU\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Name\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Quantity\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"UOM\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Unit Price\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Amount\")]),_vm._v(\" \"),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Action\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('b',[_vm._v(\"Total\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progress-bar progress-bar-striped progress-bar-animated\",staticStyle:{\"width\":\"100%\"},attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"100\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})])}]\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-17f258b5\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./resources/js/views/purchase-orders/Create.vue\n// module id = Kis2\n// module chunks = 25","<template>\n    <div>\n        <div class=\"card\">\n            <div class=\"card-header\">\n                Purchase Orders / Create New Purchase Order\n            </div>\n            <div class=\"card-body\">\n                <div v-if=\"ifReady\">\n                    <form v-on:submit.prevent=\"createNewPurchaseOrder\">\n\n                        <div class=\"row\">\n                            <div class=\"col-md-6 form-group\">\n                                <label>Date</label>\n                                <input type=\"date\" class=\"form-control\" v-model=\"order_date\" required>\n                            </div>\n\n                            <div class=\"col-md-6 form-group\">\n                                <label>Contact</label>\n                                <select class=\"form-control\" v-model=\"contact_id\" required>\n                                    <option value=\"\" disabled hidden>Select Contact</option>\n                                    <option :key=\"contact.id\" v-for=\"contact in contacts\" v-bind:value=\"contact.id\">{{ contact.person }}</option>\n                                </select>\n                            </div>\n\n                            <div class=\"col-md-6 form-group\">\n                                <label>Warehouse</label>\n                                <select class=\"form-control\" v-model=\"sub_department_id\" required>\n                                    <option value=\"\" disabled hidden>Select Warehouse</option>\n                                    <option :key=\"department.id\" v-for=\"department in warehouses\" v-bind:value=\"department.id\">{{ department.name }}</option>\n                                </select>\n                            </div>\n\n                            <div class=\"col-md-6 form-group\">\n                                <label>Reference #</label>\n                                <input type=\"text\" class=\"form-control\" v-model=\"reference_number\" required>\n                            </div>\n                        </div>\n                        <br />\n                        <table class=\"table table-hover table-sm\">\n                            <caption>\n                                <div class=\"row\">\n                                    <div class=\"col-md-3\">\n                                    </div>\n                                </div>\n                            </caption>\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\">SKU</th>\n                                    <th scope=\"col\">Name</th>\n                                    <th scope=\"col\">Quantity</th>\n                                    <th scope=\"col\">UOM</th>\n                                    <th scope=\"col\">Unit Price</th>\n                                    <th scope=\"col\">Amount</th>\n                                    <th scope=\"col\">Action</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr :key=\"item.id\" v-for=\"(item, key) in items\">\n                                    <td>{{ item.sku }}</td>\n                                    <td>\n                                        <select class=\"form-control\" v-model=\"item.item_id\" required v-on:change=\"onSelectItem(item.item_id, key)\">\n                                            <option value=\"\" disabled hidden>Select Item</option>\n                                            <option :key=\"item.id\" v-for=\"item in itemsList\" v-bind:value=\"item.id\">{{ item.name }}</option>\n                                        </select>\n                                    </td>\n                                    <td><input class=\"form-control\" v-model.number=\"item.quantity\" required></td>\n                                    <td>{{ item.unit_name }}</td>\n                                    <td><input class=\"form-control\" v-model.number=\"item.unit_price\"></td>\n                                    <td>{{subtotalRow[key]}}</td>\n                                    <td>\n                                        <button type=\"button\" class=\"btn btn-danger btn-sm\" @click=\"deleteRow\">Remove</button>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td></td>\n                                    <td></td>\n                                    <td></td>\n                                    <td></td>\n                                    <td>\n                                        <b>Total</b>\n                                    </td>\n                                    <td>{{total}}</td>\n                                    <td></td>\n                                </tr>\n                            </tbody>\n                            <button type=\"button\" class=\"btn btn-primary btn-sm\" @click=\"addRow\">Add Row</button>\n                        </table>\n\n                        <button type=\"submit\" class=\"btn btn-success btn-sm\">Create New Purchase Order</button>\n                    </form>\n                </div>\n\n                <div v-else>\n                    <div class=\"progress\">\n                        <div class=\"progress-bar progress-bar-striped progress-bar-animated\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%;\"></div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                ifReady: true,\n                contacts: \"\",\n                warehouses: \"\",\n                itemsList: \"\",\n                reference_number: \"\",\n                contact_id: \"\",\n                order_date: \"\",\n                sub_department_id: \"\",\n                items: [],\n                amount: \"\"\n            };\n        },\n\n        mounted() {\n            let promise = new Promise((resolve, reject) => {\n                axios.get(\"/api/contacts/get-all-contacts/\").then(res => {\n                    this.contacts = res.data.contacts;\n                    if (!res.data.response) {\n                        return;\n                    }\n                    resolve();\n                });\n            });\n\n            let promise2 = new Promise((resolve, reject) => {\n                axios.get(\"/api/warehouses/get-all-warehouses\").then(res => {\n                    this.warehouses = res.data.warehouses;\n                    if (! res.data.response) { return; }\n                    resolve();\n                });\n            });\n\n            let promise3 = new Promise((resolve, reject) => {\n                axios.get(\"/api/items/get-all-items/\").then(res => {\n                    this.itemsList = res.data.items;\n                    if (!res.data.response) {\n                        return;\n                    }\n                    resolve();\n                });\n            });\n\n            this.addRow();\n        },\n\n        computed: {\n            subtotalRow() {\n                return this.items.map((item) => {\n                    return Number(item.quantity * item.unit_price)\n                });\n            },\n            total() {\n                return this.items.reduce((total, item) => {\n                    return total + item.quantity * item.unit_price;\n                }, 0);\n            }\n        },\n\n        methods: {\n            onSelectItem(id, index) {\n                const Index = index\n                const selectedItem = this.itemsList.find(y => y.id === id);\n                console.log(selectedItem)\n                this.items[Index].sku = selectedItem.SKU,\n                this.items[Index].item_id = selectedItem.id,\n                this.items[Index].unit_id = selectedItem.purchase_unit_id,\n                this.items[Index].unit_name = selectedItem.purchase_uom.name,\n                this.items[Index].unit_price = selectedItem.purchase_price\n            },\n            addRow() {\n                this.items.push({\n                    sku: '',\n                    item_id: '',\n                    quantity: '',\n                    unit_id: '',\n                    unit_name: '',\n                    unit_price: ''\n                })\n            },\n            deleteRow(index) {\n                this.items.splice(index,1)\n            },\n            createNewPurchaseOrder() {\n                const newItems = [];\n                this.$data.items.forEach(element => {\n                    newItems.push({\n                        item_id: element.item_id,\n                        quantity: element.quantity,\n                        unit_id: element.unit_id,\n                        unit_price: element.unit_price\n                    })\n                });\n                const formData = {\n                    reference_number: this.$data.reference_number,\n                    contact_id: this.$data.contact_id,\n                    order_date: this.$data.order_date,\n                    warehouse_id: this.$data.sub_department_id,\n                    amount: this.total,\n                    items: newItems\n                }\n\n                console.log(formData);\n\n                axios.post(\"/api/purchase-orders\", formData).then(res => {\n                    console.log(JSON.stringify(res.data));\n                    this.$router.push({ name: \"purchase-orders.index\" });\n                }).catch(err => {\n                    console.log(err);\n                    alert(`Error! Can't create purchase order`);\n                });\n            }\n        }\n    };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// resources/js/views/purchase-orders/Create.vue"],"sourceRoot":""}