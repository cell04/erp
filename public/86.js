webpackJsonp([86],{"/WK+":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[t.ifReady?a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.createNewBill(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Quotation #")]),t._v(" "),a("vue-select",{attrs:{label:"number",options:t.bills,required:""},on:{input:function(e){t.selectBill()}},model:{value:t.billsId,callback:function(e){t.billsId=e},expression:"billsId"}})],1),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Bill #")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reference_number,expression:"reference_number"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.reference_number},on:{input:function(e){e.target.composing||(t.reference_number=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Supplier")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.q_contact_name,expression:"q_contact_name"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.q_contact_name},on:{input:function(e){e.target.composing||(t.q_contact_name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Amount")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",attrs:{type:"number",readonly:""},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Due Date")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}})])]),t._v(" "),a("br"),t._v(" "),t._m(1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("table",{staticClass:"table table-hover table-sm"},[t._m(2),t._v(" "),a("tbody",[t._l(t.quotation_items,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.item.stock_keeping_unit))]),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[t._v(t._s(e.item.description))]),t._v(" "),a("td",[t._v(t._s(e.quantity))]),t._v(" "),a("td",[t._v(t._s(e.unit_of_measurement.name))]),t._v(" "),a("td",[t._v(t._s(e.price))])])}),t._v(" "),t._m(3)],2)]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"pt-3"},[a("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewBills(e)}}},[a("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Create New Invoice")])])])]):a("div",[t._m(4)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("b",[this._v("Bills / Create New Bill")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",[e("b",[e("u",[this._v("Invoice Items")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("SKU")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Description")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Qty")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("UOM")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Unit Price")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},SyeK:function(t,e,a){var i=a("VU/8")(a("zkKy"),a("/WK+"),!1,null,null,null);t.exports=i.exports},zkKy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,quotation_items:[],bills:[],billsContact:[],billsId:null,contacts:[],contact:null,contact_id:"",q_contact_id:"",q_contact_name:"",due_date:"",amount:"",amount_paid:0,items:[],reference_number:"",receive_order_id:"",billable_id:"",billable_type:"",bill_items:[{item:"",item_id:"",quantity:0,unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:0,item_pricelist_id:"",subTotal:0}],amounts:"",isDisabled:!1}},mounted:function(){var t=this,e=new Promise(function(e,a){axios.get("/api/contacts/get-all-contacts/").then(function(a){t.contacts=a.data.contacts,e()}).catch(function(t){console.log(t),a()})}),a=new Promise(function(e,a){axios.get("/api/items/get-all-items/").then(function(a){t.items=a.data.items,e()}).catch(function(t){console.log(t),a()})}),i=new Promise(function(e,a){axios.get("/api/quotations/get-all-quotations/").then(function(a){t.bills=a.data.quotations,t.billsContact=a.data.quotations.contact,e()}).catch(function(t){console.log(t),a()})});Promise.all([e,a,i]).then(function(){t.ifReady=!0})},computed:{},methods:{viewBills:function(){this.$router.push({name:"bills.index"})},getBillsData:function(t){var e=this;axios.get("/api/quotations/"+t).then(function(t){e.q_contact_id=t.data.quotation.contact_id,e.q_contact_name=t.data.quotation.contact.person,e.amount=t.data.quotation.amount,e.quotation_items=t.data.quotation.quotation_items,e.billable_id=t.data.quotation.quotable_id,e.billable_type=t.data.quotation.quotable_type,resolve()}).catch(function(t){console.log(t),reject()})},selectBill:function(){this.receive_order_id=this.billsId.id,console.log("Date: "+this.due_date),this.getBillsData(this.billsId.id)},createNewBill:function(){var t=this;this.ifReady=!1;var e=[];this.$data.quotation_items.forEach(function(t){e.push({item_id:t.item_id,quantity:t.quantity,unit_of_measurement_id:t.unit_of_measurement_id,price:t.price})});var a={bill_items:this.$data.quotation_items,quotation_id:this.$data.receive_order_id,contact_id:this.$data.q_contact_id,billable_id:this.billable_id,billable_type:this.billable_type,reference_number:this.$data.reference_number,due_date:this.$data.due_date,amount:this.$data.amount,amount_paid:"0"};console.log(a),axios.post("/api/bills",a).then(function(e){t.$router.push({name:"bills.index"})}).catch(function(e){alert("Error! Can't create bill"),t.ifReady=!0})}}}}});
//# sourceMappingURL=86.js.map