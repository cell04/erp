webpackJsonp([8],{"01JZ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",{staticClass:"p-md-4"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewInvoices(e)}}},[t._v("Sales Invoices")]),t._v(" "),i("a",{staticClass:"text-secondary"},[t._v(" / Create New Sales Invoice")])]),t._v(" "),i("div",{staticClass:"card-body"},[t.ifReady?i("div",[i("form",{on:{submit:function(e){return e.preventDefault(),t.createNewInvoice(e)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Quotation #")]),t._v(" "),i("vue-select",{attrs:{label:"number",options:t.quotation},on:{input:function(e){t.selectQuotation()}},model:{value:t.quotationData,callback:function(e){t.quotationData=e},expression:"quotationData"}})],1),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v(" Sales Invoice #")]),t._v(" "),i("div",{staticClass:"input-group"},[t._m(1),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.reference_number,expression:"reference_number"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"Invoice #","aria-label":"Input group example","aria-describedby":"btnGroupAddon"},domProps:{value:t.reference_number},on:{input:function(e){e.target.composing||(t.reference_number=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Customer")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("div",{staticClass:"dateStyle"},[i("label",[t._v("Due Date")]),t._v(" "),i("datepicker",{attrs:{"bootstrap-styling":!0,required:""},model:{value:t.due_date,callback:function(e){t.due_date=e},expression:"due_date"}})],1)])]),t._v(" "),i("br"),t._v(" "),t._m(2),t._v(" "),i("br"),t._v(" "),i("table",{staticClass:"table table-hover table-sm"},[t._m(3),t._v(" "),i("tbody",[t._l(t.quotation_items,function(e,a){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.item.stock_keeping_unit))]),t._v(" "),i("td",[t._v(t._s(e.item.name))]),t._v(" "),i("td",[t._v(t._s(e.item.description))]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.quantity},on:{input:function(i){i.target.composing||t.$set(e,"quantity",i.target.value)}}})]),t._v(" "),i("td",[t._v(t._s(e.unit_of_measurement.name))]),t._v(" "),i("td",[t._v(t._s(e.price))]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v(t._s(t._f("Decimal")(t.subtotalRow[a])))])])}),t._v(" "),i("tr",[i("td",{attrs:{colspan:"5"}}),t._v(" "),t._m(4),t._v(" "),i("td",{attrs:{align:"right"}},[t._v(t._s(t._f("Decimal")(t.total)))]),t._v(" "),i("td")])],2)]),t._v(" "),i("div",{staticClass:"pt-3"},[i("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewInvoices(e)}}},[i("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")]),t._v(" "),i("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Create New Invoice")])])])]):i("div",[t._m(5)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-title"},[e("h4",{staticClass:"module-title"},[this._v("SALES INVOICE")]),this._v(" "),e("hr",{staticClass:"title-border"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text",attrs:{id:"btnGroupAddon"}},[this._v("I")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",[e("b",[e("u",[this._v("Sales Invoice Items")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("SKU")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Description")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Qty")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("UOM")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Unit Price")]),t._v(" "),i("th",{staticClass:"text-right"},[t._v("Amount")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},"1+mZ":function(t,e,i){var a=i("VU/8")(i("JimB"),i("01JZ"),!1,function(t){i("3jph")},null,null);t.exports=a.exports},"3jph":function(t,e,i){var a=i("s9D+");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("53a87152",a,!0,{})},JimB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,quotation_items:[],receiveOrder:[],receiveOrderData:[],quotation:[],quotationData:null,contacts:[],bidsheets:[],bidsheetData:null,bid_sheet_id:"",contact:null,contact_id:"",due_date:"",amount:"",amount_paid:"",items:[],reference_number:"",quotation_id:"",invoice_items:[{item:"",item_id:"",quantity:0,unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:0,price:"",subTotal:0}],amounts:"",isDisabled:!1}},filters:{Decimal:function(t){if(t)return t.toFixed(2)}},mounted:function(){var t=this,e=new Promise(function(e,i){axios.get("/api/contacts/get-all-contacts/").then(function(i){t.contacts=i.data.contacts,e()}).catch(function(t){console.log(t),i()})}),i=new Promise(function(e,i){axios.get("/api/bid-sheets/get-all-bid-sheets/").then(function(i){t.bidsheets=i.data.bid_sheets,e()}).catch(function(t){console.log(t),i()})}),a=new Promise(function(e,i){axios.get("/api/items/get-all-items/").then(function(i){t.items=i.data.items,e()}).catch(function(t){console.log(t),i()})}),n=new Promise(function(e,i){axios.get("/api/quotations/get-all-quotations/").then(function(i){t.quotation=i.data.quotations,e()}).catch(function(t){console.log(t),i()})});Promise.all([e,i,a,n]).then(function(){t.ifReady=!0})},computed:{subtotalRow:function(){return this.quotation_items.map(function(t){return Number(t.quantity*t.price)})},total:function(){return this.quotation_items.reduce(function(t,e){return t+e.quantity*e.price},0)}},methods:{viewInvoices:function(){this.$router.push({name:"invoices.index"})},getQuotationDetails:function(t){var e=this;console.log("Take id: "+t),axios.get("/api/quotations/"+t).then(function(t){e.contact=t.data.quotation.contact.person,e.contact_id=t.data.quotation.contact_id,e.quotation_items=t.data.quotation.quotation_items,e.autoGenerateInvoive(),resolve()}).catch(function(t){console.log(t),reject()})},autoGenerateInvoive:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].join("");this.reference_number=e,console.log("Code: "+e)},selectQuotation:function(){this.quotation_id=this.quotationData.id,this.getQuotationDetails(this.quotationData.id)},addNewItem:function(){this.invoice_items.push({item:"",item_id:"",quantity:"",unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:"",price:"",subTotal:0}),this.updateTotalAmount()},deleteRow:function(t){this.invoice_items.splice(t,1),this.updateTotalAmount()},createNewInvoice:function(){var t=this;this.ifReady=!1;var e=[];this.$data.quotation_items.forEach(function(t){e.push({item_id:t.item_id,quantity:t.quantity,unit_of_measurement_id:t.unit_of_measurement_id,price:t.price})});var i={invoice_items:e,quotation_id:this.quotation_id,contact_id:this.$data.contact_id,reference_number:"I"+this.$data.reference_number,due_date:moment(this.$data.due_date).format("YYYY-MM-DD"),amount:this.total,amount_paid:0};console.log(i),axios.post("/api/invoices",i).then(function(e){t.$router.push({name:"invoices.index"})}).catch(function(e){alert("Error! Can't create invoice"),t.ifReady=!0})}}}},"s9D+":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".dateStyle input:-moz-read-only{background-color:#fff!important}.dateStyle input:read-only{background-color:#fff!important}",""])}});
//# sourceMappingURL=8.js.map