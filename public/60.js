webpackJsonp([60],{"1+mZ":function(t,e,i){var n=i("VU/8")(i("s48/"),i("Ckm4"),!1,null,null,null);t.exports=n.exports},Ckm4:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[t._v("\n        Invoices / Create New Invoice\n    ")]),t._v(" "),i("div",{staticClass:"card-body"},[t.ifReady?i("div",[i("form",{on:{submit:function(e){return e.preventDefault(),t.createNewInvoice(e)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Receive Order")]),t._v(" "),i("vue-select",{attrs:{label:"reference_number",options:t.receiveOrder},on:{input:function(e){t.selectRo()}},model:{value:t.receiveOrderId,callback:function(e){t.receiveOrderId=e},expression:"receiveOrderId"}})],1),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Due Date")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Contact")]),t._v(" "),i("vue-select",{attrs:{label:"person",options:t.contacts},on:{input:function(e){t.selectContact()}},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Reference #")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.reference_number,expression:"reference_number"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.reference_number},on:{input:function(e){e.target.composing||(t.reference_number=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Amount")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-md-6 form-group"},[i("label",[t._v("Amount Paid")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.amount_paid,expression:"amount_paid"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.amount_paid},on:{input:function(e){e.target.composing||(t.amount_paid=e.target.value)}}})])]),t._v(" "),i("br"),t._v(" "),i("table",{staticClass:"table table-hover table-sm"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("tbody",[t._l(t.invoice_items,function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(e.item.stock_keeping_unit))]),t._v(" "),i("td",[i("vue-select",{attrs:{label:"name",options:t.items},on:{input:function(e){t.selectItem(n)}},model:{value:e.item,callback:function(i){t.$set(e,"item",i)},expression:"invoice_item.item"}})],1),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"invoice_item.quantity",modifiers:{number:!0}}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.quantity},on:{input:function(i){i.target.composing||t.$set(e,"quantity",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[t._v("\n                                "+t._s(e.unitOfMeasurement)+"\n                            ")]),t._v(" "),i("td",[i("vue-select",{attrs:{label:"price",options:e.itemPricelists},on:{input:function(e){t.selectItemPricelist(n)}},model:{value:e.itemPricelist,callback:function(i){t.$set(e,"itemPricelist",i)},expression:"invoice_item.itemPricelist"}})],1),t._v(" "),i("td",[t._v(t._s(isNaN(e.subTotal)?"0.00":e.subTotal))]),t._v(" "),i("td",[i("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){t.deleteRow(n)}}},[t._v("Remove")])])])}),t._v(" "),i("tr",[i("td",{attrs:{colspan:"4"}}),t._v(" "),t._m(2),t._v(" "),i("td",[t._v(t._s(isNaN(t.amounts)?"0.00":t.amounts))]),t._v(" "),i("td")])],2)]),t._v(" "),i("div",{staticClass:"pt-3"},[i("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[t._v("Create New Invoice")]),t._v(" "),i("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.addNewItem}},[t._v("Add New Item")])])])]):i("div",[t._m(3)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("caption",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("SKU")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Item")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Quantity")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Unit of Measurement")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Price")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Sub Total")]),t._v(" "),i("th",{attrs:{scope:"col"}},[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},"s48/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,receiveOrder:[],receiveOrderId:null,contacts:[],contact:null,contact_id:"",due_date:"",amount:"",amount_paid:"",items:[],reference_number:"",receive_order_id:"",invoice_items:[{item:"",item_id:"",quantity:0,unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:0,item_pricelist_id:"",subTotal:0}],amounts:"",isDisabled:!0}},mounted:function(){var t=this,e=new Promise(function(e,i){axios.get("/api/contacts/get-all-contacts/").then(function(i){t.contacts=i.data.contacts,e()}).catch(function(t){console.log(t),i()})}),i=new Promise(function(e,i){axios.get("/api/items/get-all-items/").then(function(i){t.items=i.data.items,e()}).catch(function(t){console.log(t),i()})}),n=new Promise(function(e,i){axios.get("/api/receive-orders/get-all-receive-orders/").then(function(i){t.receiveOrder=i.data.receive_orders,e()}).catch(function(t){console.log(t),i()})});Promise.all([e,i,n]).then(function(){t.ifReady=!0})},computed:{subTotalRow:function(){return this.invoice_items.map(function(t){return t.quantity*t.unit_price})},total:function(){return this.invoice_items.reduce(function(t,e){return t+e.quantity*e.unit_price},0)}},methods:{selectContact:function(){this.contact_id=this.contact.id},selectRo:function(){this.receive_order_id=this.receiveOrderId.id,console.log("RO: "+this.receiveOrderId.id)},selectItem:function(t){var e=this;this.invoice_items[t].item_id=this.invoice_items[t].item.id,this.invoice_items[t].unitOfMeasurement=this.invoice_items[t].item.default_unit_of_measurement.name,this.invoice_items[t].unit_of_measurement_id=this.invoice_items[t].item.default_unit_of_measurement.id;new Promise(function(i,n){axios.get("/api/item-pricelists/get-item-pricelists/"+e.invoice_items[t].item_id).then(function(n){e.invoice_items[t].itemPricelists=n.data.item_pricelists,i()}).catch(function(t){console.log(t),n()})})},selectItemPricelist:function(t){this.invoice_items[t].item_pricelist_id=this.invoice_items[t].itemPricelist.id,this.invoice_items[t].subTotal=parseFloat(this.invoice_items[t].quantity)*parseFloat(this.invoice_items[t].itemPricelist.price),this.updateTotalAmount()},updateTotalAmount:function(){var t=0;this.invoice_items.forEach(function(e){t+=e.subTotal}),this.amounts=t,this.amounts>0?this.isDisabled=!1:this.isDisabled=!0},addNewItem:function(){this.invoice_items.push({item:"",item_id:"",quantity:"",unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:"",item_pricelist_id:"",subTotal:0}),this.updateTotalAmount()},deleteRow:function(t){this.invoice_items.splice(t,1),this.updateTotalAmount()},createNewInvoice:function(){var t=this;this.ifReady=!1;var e=[];this.$data.invoice_items.forEach(function(t){e.push({item_id:t.item_id,quantity:t.quantity,unit_of_measurement_id:t.unit_of_measurement_id,item_pricelist_id:t.item_pricelist_id})});var i={invoice_items:e,receive_order_id:this.receive_order_id,contact_id:this.$data.contact_id,reference_number:this.$data.reference_number,due_date:this.$data.due_date,amount:this.$data.amount,amount_paid:this.$data.amount_paid};console.log(i),axios.post("/api/invoices",i).then(function(e){t.$router.push({name:"invoices.index"})}).catch(function(e){alert("Error! Can't create invoice"),t.ifReady=!0})}}}}});
//# sourceMappingURL=60.js.map