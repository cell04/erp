webpackJsonp([6],{"7BpZ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:this.$store.state.showSidebar?"content-title":"spacer content-title"},[a("h4",{staticClass:"module-title"},[t._v("QUOTATION")]),t._v(" "),a("hr",{staticClass:"title-border"})]),t._v(" "),a("div",{staticClass:"p-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.viewQuotations(e)}}},[t._v("Quotations")]),t._v(" "),a("a",{staticClass:"text-secondary"},[t._v(" / Create New Quotation")])]),t._v(" "),a("div",{staticClass:"card-body"},[t.ifReady?a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.createNewQuotation(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Quotation Number")]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"Quotation #","aria-label":"Input group example","aria-describedby":"btnGroupAddon",readonly:""},domProps:{value:t.number},on:{input:function(e){e.target.composing||(t.number=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Customer")]),t._v(" "),a("vue-select",{attrs:{label:"person",options:t.contacts},on:{input:function(e){t.selectContact()}},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Do you want to add Tax Percentage?")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tax_value,expression:"tax_value"}],attrs:{type:"radio",value:"Yes"},domProps:{checked:t._q(t.tax_value,"Yes")},on:{click:function(e){t.selectTax("yes")},change:function(e){t.tax_value="Yes"}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("  Yes")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tax_value,expression:"tax_value"}],attrs:{type:"radio",value:"No"},domProps:{checked:t._q(t.tax_value,"No")},on:{click:function(e){t.selectTax("no")},change:function(e){t.tax_value="No"}}}),t._v(" "),a("label",{staticClass:"form-check-label"},[t._v("  No")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tax,expression:"tax"},{name:"show",rawName:"v-show",value:"Yes"===t.tax_value,expression:"tax_value === 'Yes'"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Tax %"},domProps:{value:t.tax},on:{input:function(e){e.target.composing||(t.tax=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("label",[t._v("Stock Origin")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from_selected_radio_button,expression:"from_selected_radio_button"}],attrs:{type:"radio",value:"warehouse"},domProps:{checked:t._q(t.from_selected_radio_button,"warehouse")},on:{change:function(e){t.from_selected_radio_button="warehouse"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("  Warehouse")])]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.from_selected_radio_button,expression:"from_selected_radio_button"}],attrs:{type:"radio",value:"branch"},domProps:{checked:t._q(t.from_selected_radio_button,"branch")},on:{change:function(e){t.from_selected_radio_button="branch"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("  Branch")])]),t._v(" "),a("vue-select",{directives:[{name:"show",rawName:"v-show",value:"warehouse"===t.from_selected_radio_button,expression:"from_selected_radio_button === 'warehouse'"}],attrs:{label:"name",options:t.warehouses},on:{input:function(e){t.selectFromWarehouse()}},model:{value:t.fromWarehouse,callback:function(e){t.fromWarehouse=e},expression:"fromWarehouse"}}),t._v(" "),a("vue-select",{directives:[{name:"show",rawName:"v-show",value:"branch"===t.from_selected_radio_button,expression:"from_selected_radio_button === 'branch'"}],attrs:{label:"name",options:t.branches},on:{input:function(e){t.selectFromBranch()}},model:{value:t.fromBranch,callback:function(e){t.fromBranch=e},expression:"fromBranch"}})],1),t._v(" "),a("div",{staticClass:"col-md-6 form-group"},[a("div",{staticClass:"dateStyle"},[a("label",[t._v("Validity Date")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,placeholder:"Validity Date",required:""},model:{value:t.validity_date,callback:function(e){t.validity_date=e},expression:"validity_date"}})],1)]),t._v(" "),null!==t.contactData?a("div",{staticClass:"col-md-12 form-group"},[a("hr"),t._v(" "),t._m(1),t._v(" "),a("div",[t._m(2),t._v(": "+t._s(t.contactData.person))]),t._v(" "),a("div",[t._m(3),t._v(": "+t._s(t.contactData.company))]),t._v(" "),a("div",[t._m(4),t._v(": "+t._s(t.contactData.company_address))]),t._v(" "),a("div",[t._m(5),t._v(": "+t._s(t.contactData.email))]),t._v(" "),a("div",[t._m(6),t._v(": "+t._s(t.contactData.mobile_number))]),t._v(" "),a("hr")]):t._e()]),t._v(" "),t._m(7),t._v(" "),a("br"),t._v(" "),a("table",{staticClass:"table table-hover table-sm"},[t._m(8),t._v(" "),t._m(9),t._v(" "),a("tbody",[t._l(t.quotation_items,function(e,o){return a("tr",{key:o},[a("td",[t._v(t._s(e.item.stock_keeping_unit))]),t._v(" "),a("td",[a("vue-select",{attrs:{label:"name",options:t.items},on:{input:function(e){t.selectItem(o)}},model:{value:e.item,callback:function(a){t.$set(e,"item",a)},expression:"quotation_item.item"}})],1),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"quotation_item.quantity",modifiers:{number:!0}}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.quantity},on:{input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("td",[t._v("\n                                        "+t._s(e.unitOfMeasurement)+"\n                                    ")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"quotation_item.price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.price},on:{input:[function(a){a.target.composing||t.$set(e,"price",t._n(a.target.value))},function(e){t.calculate(o)}],blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("td",[t._v(t._s(t._f("Decimal")(e.subTotal)))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){t.deleteRow(o)}}},[a("i",{staticClass:"far fa-times-circle"})])])])}),t._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}}),t._v(" "),t._m(10),t._v(" "),a("td",[a("b",[t._v(t._s(t._f("Decimal")(t.amount)))])]),t._v(" "),a("td")])],2)]),t._v(" "),a("div",{staticClass:"pt-3"},[a("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.viewQuotations(e)}}},[a("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")]),t._v(" "),a("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:t.addNewItem}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v(" Add New Item")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:t.isDisabled}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Create New Quotation")])])])]):a("div",[t._m(11)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text",attrs:{id:"btnGroupAddon"}},[this._v("QN")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",[e("u",[this._v("Customer Information:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Customer")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Company")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Address")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Email")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"name"}},[e("strong",[this._v("Phone")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",[e("b",[e("u",[this._v("Quotation Items")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("caption",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("SKU")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Item")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Qty")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("UOM")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Price")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Sub Total")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("b",[this._v("Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},Nsjp:function(t,e,a){var o=a("blm1");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("72d63f35",o,!0,{})},X61u:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ifReady:!1,contactData:null,from_selected_radio_button:"",fromWarehouse:null,fromBranch:null,warehouses:[],branches:[],stock_receivable_from_id:null,stock_receivable_from_type:null,contacts:[],contact:null,contact_id:"",items:[],number:"",tax:"",validity_date:"",quotation_items:[{item:"",item_id:"",quantity:"",unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",price:0,subTotal:0}],amount:0,isDisabled:!0,tax_value:""}},filters:{Decimal:function(t){if(t)return t.toFixed(2)}},mounted:function(){var t=this,e=new Promise(function(e,a){axios.get("/api/contacts/get-all-contacts/").then(function(a){t.contacts=a.data.contacts.filter(function(t){return 1==t.contact_type_id}),e()}).catch(function(t){console.log(t),a()})}),a=new Promise(function(e,a){axios.get("/api/items/get-all-items/").then(function(a){t.items=a.data.items,e()}).catch(function(t){console.log(t),a()})}),o=new Promise(function(e,a){axios.get("/api/branches/get-all-branches/").then(function(a){t.branches=a.data.branches,e()}).catch(function(t){console.log(t),a()})}),i=new Promise(function(e,a){axios.get("/api/warehouses/get-all-warehouses/").then(function(a){t.warehouses=a.data.warehouses,e()}).catch(function(t){console.log(t),a()})});Promise.all([e,a,o,i]).then(function(){t.ifReady=!0}),this.autoGenerateQuotationNumber()},computed:{subTotalRow:function(){return this.quotation_items.map(function(t){return t.quantity*t.unit_price})},total:function(){return this.quotation_items.reduce(function(t,e){return t+e.quantity*e.unit_price},0)}},methods:{viewQuotations:function(){this.$router.push({name:"quotations.index"})},getContactData:function(t){var e=this;axios.get("/api/contacts/"+t).then(function(t){e.contactData=t.data.contact,resolve()}).catch(function(t){console.log(t),reject()})},autoGenerateQuotationNumber:function(){var t=new Date,e=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].join("");this.number=e,console.log("Code: "+e)},selectTax:function(t){console.log("Value: "+t),"no"==t&&(this.tax=0)},selectContact:function(){this.contact_id=this.contact.id,this.getContactData(this.contact_id)},selectFromBranch:function(){this.stock_receivable_from_id=this.fromBranch.id,this.stock_receivable_from_type="App\\Branch",console.log("Branch - From: "+this.stock_receivable_from_id+" type: "+this.stock_receivable_from_type)},selectFromWarehouse:function(){this.stock_receivable_from_id=this.fromWarehouse.id,this.stock_receivable_from_type="App\\Warehouse",console.log("Warehouse - From: "+this.stock_receivable_from_id+" type: "+this.stock_receivable_from_type)},selectItem:function(t){var e=this;this.quotation_items[t].item_id=this.quotation_items[t].item.id,this.quotation_items[t].unitOfMeasurement=this.quotation_items[t].item.default_unit_of_measurement.name,this.quotation_items[t].unit_of_measurement_id=this.quotation_items[t].item.default_unit_of_measurement.id;new Promise(function(a,o){axios.get("/api/item-pricelists/get-item-pricelists/"+e.quotation_items[t].item_id).then(function(o){e.quotation_items[t].itemPricelists=o.data.item_pricelists,a()}).catch(function(t){console.log(t),o()})})},calculate:function(t){this.quotation_items[t].subTotal=parseFloat(this.quotation_items[t].quantity)*parseFloat(this.quotation_items[t].price),this.updateTotalAmount()},selectItemPricelist:function(t){this.quotation_items[t].item_pricelist_id=this.quotation_items[t].itemPricelist.id,this.quotation_items[t].subTotal=parseFloat(this.quotation_items[t].quantity)*parseFloat(this.quotation_items[t].itemPricelist.price),this.updateTotalAmount()},updateTotalAmount:function(){var t=0;this.quotation_items.forEach(function(e){t+=e.subTotal}),this.amount=t,this.amount>0?this.isDisabled=!1:this.isDisabled=!0},addNewItem:function(){this.quotation_items.push({item:"",item_id:"",quantity:"",unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",price:0,subTotal:0}),this.updateTotalAmount()},deleteRow:function(t){this.quotation_items.splice(t,1),this.updateTotalAmount()},createNewQuotation:function(){var t=this;this.ifReady=!1;var e=[];this.$data.quotation_items.forEach(function(t){e.push({item_id:t.item_id,quantity:t.quantity,unit_of_measurement_id:t.unit_of_measurement_id,price:t.price})});var a={contact_id:this.$data.contact_id,quotable_id:this.stock_receivable_from_id,quotable_type:this.stock_receivable_from_type,number:"QN"+this.number,amount:this.amount,tax:this.tax,validity_date:moment(this.$data.due_date).format("YYYY-MM-DD"),quotation_items:e};axios.post("/api/quotations",a).then(function(e){console.log(e.data),t.$router.push({name:"quotations.index"})}).catch(function(e){console.log(e),alert("Error! Can't create quotation"),t.ifReady=!0})}}}},blm1:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"td{width:100px!important}.dateStyle input:-moz-read-only{background-color:#fff!important}.dateStyle input:read-only{background-color:#fff!important}",""])},d99u:function(t,e,a){var o=a("VU/8")(a("X61u"),a("7BpZ"),!1,function(t){a("Nsjp")},null,null);t.exports=o.exports}});
//# sourceMappingURL=6.js.map