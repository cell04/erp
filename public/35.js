webpackJsonp([35],{"/ZEz":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[e._m(0),e._v(" "),r("div",{staticClass:"card-body"},[e.ifReady?r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.createNewReceiveOrder(t)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 form-group"},[r("label",[e._v("Purchase Order")]),e._v(" "),r("vue-select",{attrs:{label:"reference_number",options:e.purchaseOrders,required:""},on:{input:function(t){e.selectPurchaseOrder()}},model:{value:e.purchaseOrder,callback:function(t){e.purchaseOrder=t},expression:"purchaseOrder"}})],1),e._v(" "),r("div",{staticClass:"col-md-6 form-group"},[r("label",[e._v("Supplier")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.contact,expression:"contact"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.contact},on:{input:function(t){t.target.composing||(e.contact=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-md-6 form-group"},[r("label",[e._v("Receive Order #")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ro_number,expression:"ro_number"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.ro_number},on:{input:function(t){t.target.composing||(e.ro_number=t.target.value)}}})])]),e._v(" "),r("br"),e._v(" "),e._m(1),e._v(" "),r("br"),e._v(" "),r("table",{staticClass:"table table-hover table-sm"},[e._m(2),e._v(" "),r("tbody",[e._l(e.received_items,function(t,i){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.item.stock_keeping_unit))]),e._v(" "),r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.description))]),e._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"item.quantity"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.quantity},on:{input:function(r){r.target.composing||e.$set(t,"quantity",r.target.value)}}})]),e._v(" "),r("td",[e._v(e._s(t.unit_of_measurement.name))]),e._v(" "),r("td",[e._v(e._s(t.item_pricelist.price))]),e._v(" "),r("td",[e._v(e._s(e.subtotalRow[i]))]),e._v(" "),r("td",[r("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(t){e.deleteRow(i)}}},[r("i",{staticClass:"far fa-times-circle"})])])])}),e._v(" "),r("tr",[r("td"),e._v(" "),r("td"),e._v(" "),r("td"),e._v(" "),r("td"),e._v(" "),r("td"),e._v(" "),e._m(3),e._v(" "),r("td",[e._v(e._s(e.total))]),e._v(" "),r("td")])],2)]),e._v(" "),r("div",{staticClass:"pt-3"},[r("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.viewROs(t)}}},[r("i",{staticClass:"fas fa-chevron-left"}),e._v(" Back")]),e._v(" "),r("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",disabled:e.isDisabled}},[r("i",{staticClass:"fas fa-plus"}),e._v(" Create New Receive Order")])])])]):r("div",[e._m(4)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("b",[this._v("Receive Orders / Create New Receive Order")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h6",[t("b",[t("u",[this._v("Receive Order Items")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("SKU")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Name")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Description")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Qty")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("UOM")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Unit Price")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Amount")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("b",[this._v("Total")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])}]}},KfA8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{ifReady:!1,received_items:[],purchaseOrderData:[],purchaseOrders:[],purchaseOrder:null,purchaseOrderId:null,contacts:[],contact:null,contact_id:"",warehouses:[],warehouse:null,warehouse_id:"",items:[],ro_number:"",purchase_order_id:"",receive_order_items:[{item:"",item_id:"",quantity:0,unitOfMeasurements:[],unitOfMeasurement:"",unit_of_measurement_id:"",itemPricelists:[],itemPricelist:0,item_pricelist_id:"",tracking_number:"",expiration_date:"",subTotal:0}],amount:"",isDisabled:!1}},mounted:function(){var e=this,t=new Promise(function(t,r){axios.get("/api/contacts/get-all-contacts/").then(function(r){e.contacts=r.data.contacts,t()}).catch(function(e){console.log(e),r()})}),r=new Promise(function(t,r){axios.get("/api/warehouses/get-all-warehouses").then(function(r){e.warehouses=r.data.warehouses,t()}).catch(function(e){console.log(e),r()})}),i=new Promise(function(t,r){axios.get("/api/items/get-all-items/").then(function(r){e.items=r.data.items,t()}).catch(function(e){console.log(e),r()})}),s=new Promise(function(t,r){axios.get("/api/purchase-orders/get-all-purchase-orders/").then(function(r){e.purchaseOrders=r.data.purchase_orders,t()}).catch(function(e){console.log(e),r()})});Promise.all([t,r,i,s]).then(function(){e.ifReady=!0})},computed:{subtotalRow:function(){return this.received_items.map(function(e){return Number(e.quantity*e.item_pricelist.price)})},total:function(){return this.received_items.reduce(function(e,t){return e+t.quantity*t.item_pricelist.price},0)}},methods:{viewROs:function(){this.$router.push({name:"receive-orders.index"})},getPoDetails:function(e){var t=this;axios.get("/api/purchase-orders/"+e).then(function(e){t.purchaseOrderData=e.data,t.contact=e.data.purchaseOrder.contact.person,t.contact_id=e.data.purchaseOrder.contact_id,t.received_items=e.data.purchaseOrder.purchase_order_items,resolve()}).catch(function(e){console.log(e),reject()})},selectPurchaseOrder:function(){this.purchase_order_id=this.purchaseOrder.id,this.reference_number=this.purchaseOrder.reference_number,this.getPoDetails(this.purchaseOrder.id)},updateTotalAmount:function(){this.received_items.forEach(function(e){e.subTotal})},deleteRow:function(e){this.received_items.splice(e,1),this.updateTotalAmount()},createNewReceiveOrder:function(){var e=this;this.ifReady=!1;var t=[];this.$data.received_items.forEach(function(r){t.push({item_id:r.item_id,quantity:r.quantity,unit_of_measurement_id:r.unit_of_measurement_id,item_pricelist_id:r.item_pricelist_id,tracking_number:e.$data.ro_number,expiration_date:r.expiration_date})});var r={reference_number:this.$data.ro_number,contact_id:this.$data.contact_id,receive_order_items:t,purchase_order_id:this.purchase_order_id};axios.post("/api/receive-orders",r).then(function(t){console.log(t.data),e.$router.push({name:"receive-orders.index"})}).catch(function(t){console.log(t),alert("Error! Can't create receive order"),e.ifReady=!0})}}}},"PpM+":function(e,t,r){var i=r("VU/8")(r("KfA8"),r("/ZEz"),!1,null,null,null);e.exports=i.exports}});
//# sourceMappingURL=35.js.map